-- Drop

DROP TABLE  AREA  CASCADE CONSTRAINTS;
DROP TABLE  FOODZONE  CASCADE CONSTRAINTS;
DROP TABLE  PLACE  CASCADE CONSTRAINTS;
DROP TABLE  MEMBER  CASCADE CONSTRAINTS;
DROP TABLE  CART  CASCADE CONSTRAINTS;
DROP TABLE  ITEM  CASCADE CONSTRAINTS;
DROP TABLE  NOTICE  CASCADE CONSTRAINTS;
DROP TABLE  SUGGESTION  CASCADE CONSTRAINTS;
DROP TABLE  ANSWER  CASCADE CONSTRAINTS;
DROP TABLE  BOARD  CASCADE CONSTRAINTS;
DROP TABLE  FOOD_REVIEW  CASCADE CONSTRAINTS;
DROP TABLE  PLACE_REVIEW  CASCADE CONSTRAINTS;
DROP TABLE  AREA_REVIEW  CASCADE CONSTRAINTS;
DROP TABLE  AREA_REVIEW_COMMENT  CASCADE CONSTRAINTS;
DROP TABLE  FOOD_REVIEW_COMMENT  CASCADE CONSTRAINTS;
DROP TABLE  BOARD_REPLY  CASCADE CONSTRAINTS;
DROP TABLE  TAKEOUTMENU  CASCADE CONSTRAINTS;
DROP TABLE  TAKEOUT_RESERVE  CASCADE CONSTRAINTS;
DROP TABLE  PLACE_REVIEW_COMMENT  CASCADE CONSTRAINTS;




-- Create


CREATE TABLE  AREA  (
    AREA_KEY    NUMBER(10)   NOT NULL,
    AREA_NAME    VARCHAR2(50)   NULL,
    AREA_ADDRESS    VARCHAR2(100)   NULL,
    AREA_GEOCODE    VARCHAR2(100)   NULL,
    AREA_GS25    NUMBER(1)   NULL,
    AREA_TOILET    NUMBER(1)   NULL,
    AREA_SINK    NUMBER(1)   NULL,
    AREA_POOL    NUMBER(1)   NULL,
    AREA_IMAGE    VARCHAR2(100)   NULL,
    AREA_ETC    VARCHAR2(100)   NULL,
    FOODZONE_KEY    NUMBER(10)   NULL,
    PLACE_KEY    NUMBER(10)   NULL,
    SCOREAVG    NUMBER(5)   NULL
);



CREATE TABLE  FOODZONE  (
    FOODZONE_KEY    NUMBER(10)   NOT NULL,
    FOODZONE_NAME    VARCHAR2(100)   NULL,
    FOODZONE_ADDRESS    VARCHAR2(100)   NULL,
    FOODZONE_GEOCODE    VARCHAR2(100)   NULL,
    FOODZONE_PHONE    VARCHAR2(100)   NULL,
    FOODZONE_IMAGE    VARCHAR2(100)   NULL,
    FOODZONE_ETC    VARCHAR2(100)   NULL,
    SCOREAVG    NUMBER(5)   NULL,
    TAKEOUT_STATUS    VARCHAR2(1)   NULL
);


CREATE TABLE  PLACE  (
    PLACE_KEY    NUMBER(10)   NOT NULL,
    PLACE_NAME    VARCHAR2(100)   NULL,
    PLACE_ADDRESS    VARCHAR2(100)   NULL,
    PLACE_GEOCODE    VARCHAR2(100)   NULL,
    PLACE_GS25    NUMBER(1)   NULL,
    PLACE_TOILET    NUMBER(1)   NULL,
    PLACE_PARKING    NUMBER(1)   NULL,
    PLACE_IMAGE    VARCHAR2(100)   NULL,
    PLACE_ETC    VARCHAR2(100)   NULL,
    SCOREAVG    NUMBER(5)   NULL
);



CREATE TABLE  MEMBER  (
    MEMBER_ID    VARCHAR2(30)   NOT NULL,
    MEMBER_PWD    VARCHAR2(30)   NULL,
    MEMBER_NAME    VARCHAR2(20)   NULL,
    PHONE    VARCHAR2(40)   NULL,
    EMAIL    VARCHAR2(100)   NULL,
    MEMBER_ADDRESS    VARCHAR2(100)   NULL,
    ADMIN    VARCHAR2(1)   NULL
);



CREATE TABLE  CART  (
    CART_KEY    NUMBER(10)   NOT NULL,
    CART_QUANTITY    NUMBER(5)   NULL,
    CART_STATUS    VARCHAR2(1)   NULL,
    CART_ORDERDATE    DATE   NULL,
    ITEM_KEY    NUMBER(10)   NOT NULL,
    MEMBER_ID    VARCHAR2(30)   NOT NULL
);


CREATE TABLE  ITEM  (
    ITEM_KEY    NUMBER(10)   NOT NULL,
    ITEM_NAME    VARCHAR2(100)   NULL,
    ITEM_PRICE    NUMBER(15)   NULL,
    ITEM_INFO    VARCHAR2(200)   NULL,
    ITEM_IMAGE    VARCHAR2(200)   NULL,
    ITEM_CATEGORY    VARCHAR2(30)   NULL,
    ITEM_REGDATE    DATE   NULL
);



CREATE TABLE  NOTICE  (
    NOTICE_KEY    NUMBER(10)   NOT NULL,
    NOTICE_TITLE    VARCHAR2(100)   NULL,
    NOTICE_CONTENT    VARCHAR2(500)   NULL,
    NOTICE_ENROLL_DATE    DATE   NULL,
    NOTICE_COUNT    NUMBER(10)   NULL,
    MEMBER_ID    VARCHAR2(30)   NOT NULL
);


CREATE TABLE  SUGGESTION  (
    SUGGESTION_KEY    NUMBER(10)   NOT NULL,
    SUGGESTION_TITLE    VARCHAR2(100)   NULL,
    SUGGESTION_CONTENT    VARCHAR2(300)   NULL,
    SUGGESTION_ENROLL_DATE    DATE   NULL,
    SUGGESTION_COUNT    NUMBER(10)   NULL,
    MEMBER_ID    VARCHAR2(30)   NOT NULL,
    ANSWER_CHECK    NUMBER(10)   NULL
);


CREATE TABLE  ANSWER  (
    ANSWER_KEY    NUMBER(10)   NOT NULL,
    ANSWER_TITLE    VARCHAR2(100)   NULL,
    ANSWER_CONTENT    VARCHAR2(300)   NULL,
    ANSWER_ENROLL_DATE    DATE   NULL,
    SUGGESTION_KEY    NUMBER(10)   NOT NULL
);


CREATE TABLE  BOARD  (
    BOARD_KEY    NUMBER(10)   NOT NULL,
    BOARD_TITLE    VARCHAR2(100)   NULL,
    BOARD_CONTENT    VARCHAR2(500)   NULL,
    BOARD_ENROLL_DATE    DATE   NULL,
    BOARD_COUNT    NUMBER(10)   NULL,
    MEMBER_ID    VARCHAR2(30)   NOT NULL,
    BOARD_MODIFY_DATE    DATE   NULL
);


CREATE TABLE  FOOD_REVIEW  (
    FR_KEY    NUMBER(10)   NOT NULL,
    FOODZONE_KEY    NUMBER(10)   NOT NULL,
    FR_SCORE    NUMBER(30)   NULL,
    FR_TITLE    VARCHAR2(100)   NULL,
    FR_CONTENT    VARCHAR2(300)   NULL,
    FR_REGDATE    DATE   NULL,
    FR_HITS    NUMBER(10)   NULL,
    FR_PHOTO    VARCHAR2(100)   NULL,
    MEMBER_ID    VARCHAR2(30)   NOT NULL
);



CREATE TABLE  PLACE_REVIEW  (
    PR_KEY    NUMBER(10)   NOT NULL,
    PLACE_KEY    NUMBER(10)   NOT NULL,
    PR_SCORE    NUMBER(30)   NULL,
    PR_TITLE    VARCHAR2(100)   NULL,
    PR_CONTENT    VARCHAR2(300)   NULL,
    PR_REGDATE    DATE   NULL,
    PR_HITS    NUMBER(10)   NULL,
    PR_PHOTO    VARCHAR2(100)   NULL,
    MEMBER_ID    VARCHAR2(30)   NOT NULL
);



CREATE TABLE  AREA_REVIEW  (
    AR_KEY    NUMBER(10)   NOT NULL,
    AREA_KEY    NUMBER(10)   NOT NULL,
    AR_TITLE    VARCHAR2(100)   NULL,
    AR_CONTENT    VARCHAR2(300)   NULL,
    AR_SCORE    NUMBER(30)   NULL,
    AR_REGDATE    DATE   NULL,
    AR_HITS    NUMBER(10)   NULL,
    AR_PHOTO    VARCHAR2(100)   NULL,
    MEMBER_ID    VARCHAR2(30)   NOT NULL
);


CREATE TABLE  AREA_REVIEW_COMMENT  (
    ARC_KEY    NUMBER(10)   NOT NULL,
    ARC_CONTENT    VARCHAR2(100)   NULL,
    AR_KEY    NUMBER(10)   NOT NULL,
    ARC_WRITER    VARCHAR2(30)   NULL,
    ARC_REGDATE    DATE   NULL
);


CREATE TABLE  FOOD_REVIEW_COMMENT  (
    FRC_KEY    NUMBER(10)   NOT NULL,
    FRC_CONTENT    VARCHAR2(100)   NULL,
    FR_KEY    NUMBER(10)   NOT NULL,
    FRC_WRITER    VARCHAR2(30)   NULL,
    FRC_REGDATE    DATE   NULL
);

CREATE TABLE  BOARD_REPLY  (
    BR_KEY    NUMBER(10)   NOT NULL,
    BR_CONTENT    VARCHAR(100)   NULL,
    BOARD_KEY    NUMBER(10)   NOT NULL,
    BR_WRITER    VARCHAR2(30)   NULL,
    BR_REGDATE    DATE   NULL,
    BR_STATUS    VARCHAR2(1)   NULL
);


CREATE TABLE  TAKEOUTMENU  (
    TAKEOUT_KEY    NUMBER(10)   NOT NULL,
    FOODZONE_KEY    NUMBER(10)   NOT NULL,
    TAKEOUT_MENU    VARCHAR2(100)   NULL,
    TAKEOUT_MENU_PRICE    NUMBER(15)   NULL,
    TAKEOUT_MENU_PHOTO    VARCHAR2(100)   NULL
);

CREATE TABLE  TAKEOUT_RESERVE  (
    TOR_KEY    NUMBER(10)   NOT NULL,
    MEMBER_ID    VARCHAR2(30)   NOT NULL,
    TAKEOUT_KEY    NUMBER(10)   NOT NULL,
    TOR_EA    NUMBER(10)   NULL,
    TOR_PRICE    NUMBER(10)   NULL,
    TOR_REGDATE    VARCHAR2(100)   NULL,
    TOR_TOTALPRICE    NUMBER(10)   NULL,
    FOODZONE_KEY    NUMBER(10)   NOT NULL
);



CREATE TABLE  PLACE_REVIEW_COMMENT  (
    PRC_KEY    NUMBER(10)   NOT NULL,
    PRC_CONTENT    VARCHAR2(100)   NULL,
    PR_KEY    NUMBER(10)   NOT NULL,
    PRC_WRITER    VARCHAR2(30)   NULL,
    PRC_REGDATE    DATE   NULL
);




-- Alter

ALTER TABLE  AREA  ADD CONSTRAINT  PK_AREA  PRIMARY KEY (
    AREA_KEY 
);

ALTER TABLE  FOODZONE  ADD CONSTRAINT  PK_FOODZONE  PRIMARY KEY (
    FOODZONE_KEY 
);

ALTER TABLE  PLACE  ADD CONSTRAINT  PK_PLACE  PRIMARY KEY (
    PLACE_KEY 
);

ALTER TABLE  MEMBER  ADD CONSTRAINT  PK_MEMBER  PRIMARY KEY (
    MEMBER_ID 
);

ALTER TABLE  CART  ADD CONSTRAINT  PK_CART  PRIMARY KEY (
    CART_KEY 
);

ALTER TABLE  ITEM  ADD CONSTRAINT  PK_ITEM  PRIMARY KEY (
    ITEM_KEY 
);

ALTER TABLE  NOTICE  ADD CONSTRAINT  PK_NOTICE  PRIMARY KEY (
    NOTICE_KEY 
);

ALTER TABLE  SUGGESTION  ADD CONSTRAINT  PK_SUGGESTION  PRIMARY KEY (
    SUGGESTION_KEY 
);

ALTER TABLE  ANSWER  ADD CONSTRAINT  PK_ANSWER  PRIMARY KEY (
    ANSWER_KEY 
);

ALTER TABLE  BOARD  ADD CONSTRAINT  PK_BOARD  PRIMARY KEY (
    BOARD_KEY 
);

ALTER TABLE  FOOD_REVIEW  ADD CONSTRAINT  PK_FOOD_REVIEW  PRIMARY KEY (
    FR_KEY 
);

ALTER TABLE  PLACE_REVIEW  ADD CONSTRAINT  PK_PLACE_REVIEW  PRIMARY KEY (
    PR_KEY 
);

ALTER TABLE  AREA_REVIEW  ADD CONSTRAINT  PK_AREA_REVIEW  PRIMARY KEY (
    AR_KEY 
);

ALTER TABLE  AREA_REVIEW_COMMENT  ADD CONSTRAINT  PK_AREA_REVIEW_COMMENT  PRIMARY KEY (
    ARC_KEY 
);

ALTER TABLE  FOOD_REVIEW_COMMENT  ADD CONSTRAINT  PK_FOOD_REVIEW_COMMENT  PRIMARY KEY (
    FRC_KEY 
);

ALTER TABLE  BOARD_REPLY  ADD CONSTRAINT  PK_BOARD_REPLY  PRIMARY KEY (
    BR_KEY 
);

ALTER TABLE  TAKEOUTMENU  ADD CONSTRAINT  PK_TAKEOUTMENU  PRIMARY KEY (
    TAKEOUT_KEY 
);

ALTER TABLE  TAKEOUT_RESERVE  ADD CONSTRAINT  PK_TAKEOUT_RESERVE  PRIMARY KEY (
    TOR_KEY 
);

ALTER TABLE  PLACE_REVIEW_COMMENT  ADD CONSTRAINT  PK_PLACE_REVIEW_COMMENT  PRIMARY KEY (
    PRC_KEY 
);

ALTER TABLE  CART  ADD CONSTRAINT  FK_ITEM_TO_CART_1  FOREIGN KEY (
    ITEM_KEY 
)
REFERENCES  ITEM  (
    ITEM_KEY 
);

ALTER TABLE  CART  ADD CONSTRAINT  FK_MEMBER_TO_CART_1  FOREIGN KEY (
    MEMBER_ID 
)
REFERENCES  MEMBER  (
    MEMBER_ID 
);

ALTER TABLE  NOTICE  ADD CONSTRAINT  FK_MEMBER_TO_NOTICE_1  FOREIGN KEY (
    MEMBER_ID 
)
REFERENCES  MEMBER  (
    MEMBER_ID 
);

ALTER TABLE  SUGGESTION  ADD CONSTRAINT  FK_MEMBER_TO_SUGGESTION_1  FOREIGN KEY (
    MEMBER_ID 
)
REFERENCES  MEMBER  (
    MEMBER_ID 
);

ALTER TABLE  ANSWER  ADD CONSTRAINT  FK_SUGGESTION_TO_ANSWER_1  FOREIGN KEY (
    SUGGESTION_KEY 
)
REFERENCES  SUGGESTION  (
    SUGGESTION_KEY 
);

ALTER TABLE  BOARD  ADD CONSTRAINT  FK_MEMBER_TO_BOARD_1  FOREIGN KEY (
    MEMBER_ID 
)
REFERENCES  MEMBER  (
    MEMBER_ID 
);

ALTER TABLE  FOOD_REVIEW  ADD CONSTRAINT  FK_FOODZONE_TO_FOOD_REVIEW_1  FOREIGN KEY (
    FOODZONE_KEY 
)
REFERENCES  FOODZONE  (
    FOODZONE_KEY 
);

ALTER TABLE  FOOD_REVIEW  ADD CONSTRAINT  FK_MEMBER_TO_FOOD_REVIEW_1  FOREIGN KEY (
    MEMBER_ID 
)
REFERENCES  MEMBER  (
    MEMBER_ID 
);

ALTER TABLE  PLACE_REVIEW  ADD CONSTRAINT  FK_PLACE_TO_PLACE_REVIEW_1  FOREIGN KEY (
    PLACE_KEY 
)
REFERENCES  PLACE  (
    PLACE_KEY 
);

ALTER TABLE  PLACE_REVIEW  ADD CONSTRAINT  FK_TO_PLACE_REVIEW_1  FOREIGN KEY (
    MEMBER_ID 
)
REFERENCES  MEMBER  (
    MEMBER_ID 
);

ALTER TABLE  AREA_REVIEW  ADD CONSTRAINT  FK_AREA_TO_AREA_REVIEW_1  FOREIGN KEY (
    AREA_KEY 
)
REFERENCES  AREA  (
    AREA_KEY 
);

ALTER TABLE  AREA_REVIEW  ADD CONSTRAINT  FK_MEMBER_TO_AREA_REVIEW_1  FOREIGN KEY (
    MEMBER_ID 
)
REFERENCES  MEMBER  (
    MEMBER_ID 
);

ALTER TABLE  AREA_REVIEW_COMMENT  ADD CONSTRAINT  FK_AREA_REVIEW_COMMENT_1  FOREIGN KEY (
    AR_KEY 
)
REFERENCES  AREA_REVIEW  (
    AR_KEY 
);

ALTER TABLE  FOOD_REVIEW_COMMENT  ADD CONSTRAINT  FK_FOOD_REVIEW_COMMENT_1  FOREIGN KEY (
    FR_KEY 
)
REFERENCES  FOOD_REVIEW  (
    FR_KEY 
);

ALTER TABLE  BOARD_REPLY  ADD CONSTRAINT  FK_BOARD_TO_BOARD_REPLY_1  FOREIGN KEY (
    BOARD_KEY 
)
REFERENCES  BOARD  (
    BOARD_KEY 
);

ALTER TABLE  TAKEOUTMENU  ADD CONSTRAINT  FK_FOODZONE_TO_TAKEOUTMENU_1  FOREIGN KEY (
    FOODZONE_KEY 
)
REFERENCES  FOODZONE  (
    FOODZONE_KEY 
);

ALTER TABLE  TAKEOUT_RESERVE  ADD CONSTRAINT  FK_TAKEOUT_RESERVE_1  FOREIGN KEY (
    MEMBER_ID 
)
REFERENCES  MEMBER  (
    MEMBER_ID 
);

ALTER TABLE  TAKEOUT_RESERVE  ADD CONSTRAINT  FK_TAKEOUT_RESERVE_2  FOREIGN KEY (
    TAKEOUT_KEY 
)
REFERENCES  TAKEOUTMENU  (
    TAKEOUT_KEY 
);

ALTER TABLE  TAKEOUT_RESERVE  ADD CONSTRAINT  FK_TO_TAKEOUT_RESERVE_2  FOREIGN KEY (
    FOODZONE_KEY 
)
REFERENCES  FOODZONE  (
    FOODZONE_KEY 
);

ALTER TABLE  PLACE_REVIEW_COMMENT  ADD CONSTRAINT  FK_PLACE_REVIEW_COMMENT_1  FOREIGN KEY (
    PR_KEY 
)
REFERENCES  PLACE_REVIEW  (
    PR_KEY 
);





-- Sequence Drop

DROP SEQUENCE SEQ_ANSKEY;
DROP SEQUENCE SEQ_AKEY;
DROP SEQUENCE SEQ_ARKEY;
DROP SEQUENCE SEQ_ARCKEY;
DROP SEQUENCE SEQ_BKEY;
DROP SEQUENCE SEQ_BRKEY;
DROP SEQUENCE SEQ_CKEY;
DROP SEQUENCE SEQ_FRKEY;
DROP SEQUENCE SEQ_FRCKEY;
DROP SEQUENCE SEQ_FZKEY;
DROP SEQUENCE SEQ_IKEY;
DROP SEQUENCE SEQ_NKEY;
DROP SEQUENCE SEQ_PKEY;
DROP SEQUENCE SEQ_PRKEY;
DROP SEQUENCE SEQ_PRCKEY;
DROP SEQUENCE SEQ_SUGKEY;
DROP SEQUENCE SEQ_TK;
DROP SEQUENCE SEQ_TOR;




-- Sequence

-- ANSWER SEQUENCE
CREATE SEQUENCE SEQ_ANSKEY
START WITH 1 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- AREA SEQUENCE
CREATE SEQUENCE SEQ_AKEY
START WITH 72 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- AREA_REVIEW SEQUENCE
CREATE SEQUENCE SEQ_ARKEY
START WITH 11 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- AREA_REVIEW_COMMENT SEQUENCE
CREATE SEQUENCE SEQ_ARCKEY
START WITH 1 
INCREMENT BY 1
NOMAXVALUE;

-- BOARD SEQUENCE
CREATE SEQUENCE SEQ_BKEY
START WITH 11
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- BOARD_REPLY SEQUENCE
CREATE SEQUENCE SEQ_BRKEY
START WITH 1 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- CART SEQUENCE
CREATE SEQUENCE SEQ_CKEY
START WITH 1 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- FOOD_REVIEW SEQUENCE
CREATE SEQUENCE SEQ_FRKEY
START WITH 11 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- FOOD_REVIEW_COMMENT SEQUENCE
CREATE SEQUENCE SEQ_FRCKEY
START WITH 1 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- FOOD_ZONE SEQUENCE
CREATE SEQUENCE SEQ_FZKEY
START WITH 72 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- ITEM SEQUENCE
CREATE SEQUENCE SEQ_IKEY
START WITH 81 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- NOTICE SEQUENCE
CREATE SEQUENCE SEQ_NKEY
START WITH 11 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- PLACE SEQUENCE
CREATE SEQUENCE SEQ_PKEY
START WITH 72 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- PLACE_REVIEW SEQUENCE
CREATE SEQUENCE SEQ_PRKEY
START WITH 11 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- PLACE_REVIEW_COMMENT SEQUENCE
CREATE SEQUENCE SEQ_PRCKEY
START WITH 1 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- SUGGESTION SEQUENCE
CREATE SEQUENCE SEQ_SUGKEY
START WITH 11 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

--TAKEOUT SEQUENCE
CREATE SEQUENCE SEQ_TK
START WITH 76 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

-- TAKEOUTRESERVE SEQUENCE
CREATE SEQUENCE SEQ_TOR
START WITH 1 
INCREMENT BY 1
NOMAXVALUE
NOCYCLE
NOCACHE;

commit;